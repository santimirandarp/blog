/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./src/public/javascripts/blog/entry.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _common_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/common.js */ "./src/public/javascripts/common/common.js");\n/* harmony import */ var _common_db_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/db.js */ "./src/public/javascripts/common/db.js");\n\n\n(0,_common_db_js__WEBPACK_IMPORTED_MODULE_1__.enableComments)();\nconst ULOfPosts = (0,_common_common_js__WEBPACK_IMPORTED_MODULE_0__.$)("#listOfPosts");\n\nconst listOfPostsToHTML = (postsMetadata, HTMLel) => {\n  //takes array of posts\' metadata \n  //adds each element to HTML element \'el\'\n  postsMetadata.forEach(post => {\n    const {\n      title,\n      tags,\n      brief,\n      date,\n      path\n    } = post;\n    const listing = "\\n<li class=\\"postListItem\\">\\n<article>\\n<div class=\\"postListItem_head\\">\\n<div class=\\"dateAndTags\\">\\n<p class=\\"small\\">Posted in: ".concat((0,_common_common_js__WEBPACK_IMPORTED_MODULE_0__.formatDate)(date), "</p>  \\n<p class=\\"small\\">Tags: ").concat((0,_common_common_js__WEBPACK_IMPORTED_MODULE_0__.formatTags)(tags).join(" "), " </p>\\n</div>\\n<h2>").concat(title, "</h2>\\n</div>\\n<p>").concat(brief, "</p>\\n<a href=/blog/post/").concat(path, "> Read Full Post </a>\\n</article>\\n</li>\\n");\n    HTMLel.insertAdjacentHTML("afterbegin", listing);\n    return 0;\n  });\n};\n\nwindow.addEventListener("load", () => {\n  fetch("/blog/listOfPosts").then(r => r.json()).then(r => listOfPostsToHTML(r, ULOfPosts)).catch(e => e);\n});\n\n//# sourceURL=webpack://website/./src/public/javascripts/blog/entry.js?')},"./src/public/javascripts/common/common.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "$": () => (/* binding */ $),\n/* harmony export */   "mytoggler": () => (/* binding */ mytoggler),\n/* harmony export */   "formatTags": () => (/* binding */ formatTags),\n/* harmony export */   "formatDate": () => (/* binding */ formatDate)\n/* harmony export */ });\nconst $ = document.querySelector.bind(document);\n\nconst mytoggler = element => {\n  element.style.display == "" || element.style.display == "none" ? element.style.display = "block" : element.style.display = "none";\n};\n\nconst formatTags = tags => {\n  let newTags = [];\n  let randomRGB = [];\n\n  for (let i = 0; i < 3; i++) {\n    const val = Math.floor(Math.random() * 256) + 1;\n    randomRGB.push(val);\n  }\n\n  tags.forEach(tag => newTags.push("<span \\nstyle=\\"background-color:rgba(".concat(randomRGB.toString(","), ",0.5)\\" \\nclass=\\"small\\">").concat(tag, "</span>")));\n  return newTags;\n};\n\nconst formatDate = date => date.slice(0, 10).replace(/-/g, "/");\n\n\n\n//# sourceURL=webpack://website/./src/public/javascripts/common/common.js?')},"./src/public/javascripts/common/db.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "enableComments": () => (/* binding */ enableComments)\n/* harmony export */ });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./src/public/javascripts/common/common.js");\n //Comments Area, contains the list of comments, \n//the post-comment form, and other buttons.\n\nconst comments = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.$)("#comments");\nconst loadOlderComments = comments.querySelector("#loadOlderComments");\nconst toggleFormBtn = comments.querySelector("#comments_toggleForm");\nconst thatsIt = comments.querySelector(".comments_thatsIt");\nthatsIt.style.display = "none";\nconst info = comments.querySelector(".comments_info");\ninfo.style.display = "none"; //\n///** Called from postMsg, asynchronous call to DB using data from form.*/\n//Returns a promise\n\nconst post = async data => {\n  const response = await fetch("/comments", {\n    method: "POST",\n    headers: {\n      "Content-Type": "application/json"\n    },\n    body: JSON.stringify(data)\n  });\n  return response.json();\n}; //\n//\n\n\nconst postMsg = e => {\n  //get the elements\n  const form = document.getElementById("#form"); //it\'s ok even though it is defined above also.\n\n  const name = form.querySelector("input[name=\'name\']");\n  const email = form.querySelector("input[name=\'email\']");\n  const msg = form.querySelector("textarea[name=\'msg\']");\n  const commentsList = document.getElementById("#commentsList");\n  const info = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.$)("#comments .comments_info");\n  e.preventDefault();\n  const data = {\n    name: name.value,\n    email: email.value,\n    msg: msg.value\n  };\n  post(data).then(suc => {\n    form.style.display = "none";\n    info.style.display = "block";\n    info.innerHTML = "<happy/>; ".concat(suc.msg, ". Your comment will be public shortly (we show a preview).");\n    commentsList.insertAdjacentHTML("afterbegin", commentToHTML(data));\n    setTimeout(() => {\n      info.style.display = "none";\n      info.innerHTML = "";\n    }, 3000);\n  }).catch(() => console.log("There was an error")); //still need to deal with this error.\n}; //\n///** pass array of objects from database */\n\n\nconst commentToDOM = docsArray => {\n  if (Array.isArray(docsArray)) {\n    const commentsList = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.$)("#commentsList");\n\n    if (docsArray.length == 0) {\n      //displays alert to user\n      const thatsIt = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.$)("#comments .comments_thatsIt");\n      thatsIt.innerHTML = "All comments were loaded.";\n      thatsIt.style.display = "block";\n      setTimeout(() => thatsIt.style.display = "none", 3000);\n      return 0;\n    } else {\n      //inserts the comments\n      docsArray.forEach(doc => commentsList.insertAdjacentHTML("beforeend", commentToHTML(doc)));\n      return 0;\n    }\n  } else {\n    //If it is not an array\n    thatsIt.innerHTML = "There was an error. Please try again.";\n  }\n}; ///** document => HTML elements */ \n\n\nconst commentToHTML = ({\n  name,\n  msg,\n  date\n}, preview = true) => {\n  preview = preview ? "comments_message-preview" : null;\n  return "<li class=\\"comments_message ".concat(preview, "\\">") + "<h3>".concat(name, "</h3><p>").concat(msg, "</p><p>").concat(date, "</p>") + "</li>";\n}; //\n//\n\n\nconst skipLimit = nOfComments => [nOfComments, nOfComments + 10];\n\nconst getComments = async arr => {\n  thatsIt.innerHTML = "Fetching Comments from Database...";\n  let url = "comments/".concat(arr[0], "/").concat(arr[1]);\n  const response = await fetch(url);\n  return response.json();\n};\n\nconst enableComments = () => {\n  const form = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.$)("#form");\n  window.addEventListener("load", () => getComments(skipLimit(0)).then(dArr => commentToDOM(dArr)).catch(() => console.error("There was a problem")));\n  loadOlderComments.addEventListener("click", () => {\n    const commentsList = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.$)("#commentsList");\n    const nOfComments = commentsList.children.length;\n    getComments(skipLimit(nOfComments)).then(dArr => commentToDOM(dArr)).catch(() => console.error("There was a problem"));\n  });\n  toggleFormBtn.addEventListener("click", () => (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.mytoggler)((0,_common_js__WEBPACK_IMPORTED_MODULE_0__.$)("#form")));\n  form.addEventListener("submit", postMsg);\n  return 0;\n};\n\n\n\n//# sourceURL=webpack://website/./src/public/javascripts/common/db.js?')}},__webpack_module_cache__={};function __webpack_require__(n){var e=__webpack_module_cache__[n];if(void 0!==e)return e.exports;var t=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n](t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(n,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},__webpack_require__.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),__webpack_require__.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/public/javascripts/blog/entry.js")})();