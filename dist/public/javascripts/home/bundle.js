/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./src/public/javascripts/common/common.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "$": () => (/* binding */ $),\n/* harmony export */   "mytoggler": () => (/* binding */ mytoggler)\n/* harmony export */ });\nconst $ = document.querySelector.bind(document);\n\nconst mytoggler = element => {\n  element.style.display == "" || element.style.display == "none" ? element.style.display = "block" : element.style.display = "none";\n};\n\n\n\n//# sourceURL=webpack://website/./src/public/javascripts/common/common.js?')},"./src/public/javascripts/home/db.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _common_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/common.js */ "./src/public/javascripts/common/common.js");\n //Comments Area, contains the list of comments, \n//the post-comment form, and other buttons.\n\nconst comments = (0,_common_common_js__WEBPACK_IMPORTED_MODULE_0__.$)("#comments");\nconst commentsList = comments.querySelector("#commentsList");\nconst form = comments.querySelector("#form");\nconst loadOlderComments = comments.querySelector("#loadOlderComments");\nconst toggleFormBtn = comments.querySelector("#comments_toggleForm");\nconst thatsIt = comments.querySelector(".comments_thatsIt");\nthatsIt.style.display = "none";\nconst info = comments.querySelector(".comments_info");\ninfo.style.display = "none"; //\n///** Called from postMsg, asynchronous call to DB using data from form.*/\n//Returns a promise\n\nconst post = async data => {\n  const response = await fetch("/comments", {\n    method: "POST",\n    headers: {\n      "Content-Type": "application/json"\n    },\n    body: JSON.stringify(data)\n  });\n  return response.json();\n}; //\n//\n\n\nconst postMsg = e => {\n  //get the elements\n  const form = (0,_common_common_js__WEBPACK_IMPORTED_MODULE_0__.$)("#comments form"); //it\'s ok even though it is defined above also.\n\n  const name = form.querySelector("input[name=\'name\']");\n  const email = form.querySelector("input[name=\'email\']");\n  const msg = form.querySelector("textarea[name=\'msg\']");\n  e.preventDefault();\n  const data = {\n    name: name.value,\n    email: email.value,\n    msg: msg.value\n  };\n  post(data).then(suc => {\n    form.style.display = "none";\n    info.style.display = "block";\n    info.innerHTML = "<happy/>; ".concat(suc.msg, ". Your comment will be public shortly (we show a preview).");\n    commentsList.insertAdjacentHTML("afterbegin", commentToHTML(data));\n    setTimeout(() => {\n      info.style.display = "none";\n      info.innerHTML = "";\n    }, 3000);\n  }).catch(() => console.log("There was an error")); //still need to deal with this error.\n}; //\n///** pass array of objects from database */\n\n\nconst commentToDOM = docsArray => {\n  if (Array.isArray(docsArray)) {\n    if (docsArray.length == 0) {\n      //displays alert to user\n      thatsIt.innerHTML = "All comments were loaded.";\n      thatsIt.style.display = "block";\n      setTimeout(() => thatsIt.style.display = "none", 3000);\n      return 0;\n    } else {\n      //inserts the comments\n      docsArray.forEach(doc => commentsList.insertAdjacentHTML("beforeend", commentToHTML(doc)));\n      return 0;\n    }\n  } else {\n    //If it is not an array\n    thatsIt.innerHTML = "There was an error. Please try again.";\n    thatsIt.style.display = "block";\n  }\n}; //\n//\n///** document => HTML elements */ \n\n\nconst commentToHTML = ({\n  name,\n  msg,\n  date\n}, preview = true) => {\n  preview = preview ? "comments_message-preview" : null;\n  return "<li class=\\"comments_message ".concat(preview, "\\">") + "<h3>".concat(name, "</h3><p>").concat(msg, "</p><p>").concat(date, "</p>") + "</li>";\n}; //\n//\n\n\nconst skipLimit = nOfComments => [nOfComments, nOfComments + 10];\n\nconst getComments = async arr => {\n  thatsIt.innerHTML = "Fetching Comments from Database...";\n  let url = "comments/".concat(arr[0], "/").concat(arr[1]);\n  const response = await fetch(url);\n  return response.json();\n};\n\nwindow.addEventListener("load", () => getComments(skipLimit(0)).then(dArr => commentToDOM(dArr)).catch(() => console.error("There was a problem")));\nloadOlderComments.addEventListener("click", () => {\n  const nOfComments = commentsList.children.length;\n  getComments(skipLimit(nOfComments)).then(dArr => commentToDOM(dArr)).catch(() => console.error("There was a problem"));\n}); //\n\ntoggleFormBtn.addEventListener("click", () => (0,_common_common_js__WEBPACK_IMPORTED_MODULE_0__.mytoggler)(form));\nform.addEventListener("submit", postMsg);\n\n//# sourceURL=webpack://website/./src/public/javascripts/home/db.js?')},"./src/public/javascripts/home/entry.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _db_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db.js */ "./src/public/javascripts/home/db.js");\n/* harmony import */ var _gallery_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gallery.js */ "./src/public/javascripts/home/gallery.js");\n/* harmony import */ var _reviews_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./reviews.js */ "./src/public/javascripts/home/reviews.js");\n\n\n\n\n//# sourceURL=webpack://website/./src/public/javascripts/home/entry.js?')},"./src/public/javascripts/home/gallery.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _common_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/common.js */ "./src/public/javascripts/common/common.js");\n\nconst gallery = (0,_common_common_js__WEBPACK_IMPORTED_MODULE_0__.$)("#gallery .imgGal");\n\nconst insertImg = imgName => {\n  //name for the big scale image\n  const bigImageName = imgName.slice(8); //build the description text.\n\n  const text = bigImageName.replace(/_/g, " ").split(".")[0];\n  const imageHTML = " <a href=\\"images/gallery/".concat(bigImageName, "\\">\\n    <figure class=\\"pictures\\">\\n    <img loading=\'lazy\' src=\'images/gallery/").concat(imgName, "\' alt=\'").concat(text, "\'/>\\n    <figcaption>").concat(text, "</figcaption>\\n    </figure></a>");\n  gallery.insertAdjacentHTML("beforeend", imageHTML);\n};\n\nwindow.addEventListener("load", () => {\n  fetch("/gallery").then(r => {\n    console.log(r);\n    return r.json();\n  }).then(imgFilenames => {\n    imgFilenames.forEach(imgName => insertImg(imgName));\n    return 0;\n  }).catch(e => {\n    gallery.innerHTML = "We couldn\'t load the images. Please refresh the page or try again later.";\n    console.error(e);\n  });\n});\n\n//# sourceURL=webpack://website/./src/public/javascripts/home/gallery.js?')},"./src/public/javascripts/home/reviews.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _common_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../common/common.js */ "./src/public/javascripts/common/common.js");\n\nconst spans = document.querySelectorAll(".places .reviewSpan");\nspans.forEach(span => {\n  span.addEventListener("click", () => {\n    const img = span.nextElementSibling;\n    (0,_common_common_js__WEBPACK_IMPORTED_MODULE_0__.mytoggler)(img);\n  });\n});\n\n//# sourceURL=webpack://website/./src/public/javascripts/home/reviews.js?')}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](o,o.exports,__webpack_require__),o.exports}__webpack_require__.d=(e,n)=>{for(var o in n)__webpack_require__.o(n,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/public/javascripts/home/entry.js")})();