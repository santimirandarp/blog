const mytoggler=e=>{""==e.style.display||"none"==e.style.display?e.style.display="block":e.style.display="none"},form=document.getElementById("form"),name=document.querySelector("#comments input[name='name']"),email=document.querySelector("#comments input[name='email']"),msg=document.querySelector("#comments textarea[name='msg']"),info=document.querySelector("#comments .comments_info"),thatsIt=document.querySelector("#comments .comments_thatsIt");info.style.display="none",thatsIt.style.display="none";const toggleForm=document.querySelector("#comments .comments_toggleForm"),commentsList=document.getElementById("commentsList"),moreComments=document.querySelector("#comments .comments_more"),loadDocsArray=e=>{console.log(e),0!=e.length?e.forEach(e=>commentsList.insertAdjacentHTML("beforeend",comment(e))):(thatsIt.innerHTML="All comments were loaded.",thatsIt.style.display="block",setTimeout(()=>thatsIt.style.display="none",3e3))},comment=({name:e,msg:t},n=!0)=>`<li class="comments_message ${n=n?"comments_message-preview":null}" style="${alert}">`+`<h3>${e}</h3><p>${t}</p>`+"</li>",post=async e=>{const t=await fetch("/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.json()},postMsg=e=>{e.preventDefault();const t={name:name.value,email:email.value,msg:msg.value};post(t).then(e=>{form.style.display="none",info.style.display="block",info.innerHTML=`&#x2705; ${e.msg}. Comment will be public shortly (we show a preview).`,commentsList.insertAdjacentHTML("afterbegin",comment(t)),setTimeout(()=>{info.style.display="none",info.innerHTML=""},3e3)}).catch(e=>console.log(e))},skipLimit=e=>[e,e+10],get=async e=>{e=`comments/${e[0]}/${e[1]}`;const t=await fetch(e,{method:"GET"});return t.json()};window.addEventListener("load",()=>get(skipLimit(0)).then(e=>loadDocsArray(e)).catch(()=>console.error("There was a problem"))),moreComments.addEventListener("click",()=>{var e=commentsList.children.length;get(skipLimit(e)).then(e=>loadDocsArray(e)).catch(()=>console.error("There was a problem"))}),toggleForm.addEventListener("click",()=>mytoggler(form)),form.addEventListener("submit",postMsg);const spans=document.querySelectorAll(".places .reviewSpan");spans.forEach(t=>{t.addEventListener("click",()=>{var e=t.nextElementSibling;mytoggler(e)})});